<html lang='en'>
	<head>
		<script type="text/javascript">
			//  MS Internet Explorer must not be given a chance to fail before I can give the user an error message.
			try {
				var msie = window.navigator.userAgent.indexOf("MSIE ");
				if (msie>0 || !!navigator.userAgent.match(/Trident.*rv\:11\./)){ // If MSIE or IE 11
					alert("Internet Explorer is not supported.\n\nPlease consider using Microsoft Edge or Google Chrome instead\n\nYou will be forwarded to the download page for MS Edge now.");
					console.error("INTERNET EXPLORER IS EVIL");
					document.write("Internet Explorer is not supported");
					window.location = "https://www.microsoft.com/edge";
				}
			} catch(e){
				console.error(e);
			}
		
		</script>
		<style>
			html {
				background-color: #0000;
				transition: opacity .1s linear;
			}
		</style>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
		<meta content="text/html;charset=utf-8" http-equiv="Content-Type" />
		<meta content="utf-8" http-equiv="encoding" />
		
		<link rel="shortcut icon" href="data:image/x-icon;," type="image/x-icon" />
		<link id="favicon1" rel="icon" type="image/png" sizes="32x32" href="./media/favicon-32x32.png" />
		<link id="favicon2" rel="icon" type="image/png" sizes="16x16" href="./media/favicon-16x16.png" />
		<link id="favicon3" rel="icon" href="./media/favicon.ico" />
		<link id="thumbnailUrl" itemprop="thumbnailUrl" href="./media/vdoNinja_logo_full.png" />

		<title>Panel</title>
		<link rel="stylesheet" href="./main.css?ver=365" />
		<script type="text/javascript" crossorigin="anonymous" src="./thirdparty/adapter.js"></script>
		<style id="lightbox-animations" type="text/css"></style>
		
		<!-- Until Chrome v115 ends ; pip2 -->
		<meta http-equiv="origin-trial" content="AoalTVyEOoiQninAV09SzviYaAtRKuTfDIsMUNQLIg1/+ZWOpXEFOL+GQGqkQzkkszPrK26oGzB1hIF3beHJjAMAAABeeyJvcmlnaW4iOiJodHRwczovL3Zkby5uaW5qYTo0NDMiLCJmZWF0dXJlIjoiRG9jdW1lbnRQaWN0dXJlSW5QaWN0dXJlQVBJIiwiZXhwaXJ5IjoxNjk0MTMxMTk5fQ==">
		
		<!-- Until Chrome v117 ends ; blur -->
		<meta http-equiv="origin-trial" content="Aqwjtr1IS9AdkcWCFAOHtMMmsKDy8Ti58hQBbHkR/HnloiMhkW17cYgnkiLgOH9zuTDC/o4GquQ0MHe9tqT51wcAAABdeyJvcmlnaW4iOiJodHRwczovL3Zkby5uaW5qYTo0NDMiLCJmZWF0dXJlIjoiTWVkaWFDYXB0dXJlQmFja2dyb3VuZEJsdXIiLCJleHBpcnkiOjE2OTg5Njk1OTl9">
		
		<!-- <link rel="manifest" href="manifest.json" /> -->
			<!-- ios support 
			<link rel="apple-touch-icon" href="images/icons/icon-72x72.png" />
			<link rel="apple-touch-icon" href="images/icons/icon-96x96.png" />
			<link rel="apple-touch-icon" href="images/icons/icon-128x128.png" />
			<link rel="apple-touch-icon" href="images/icons/icon-4x4.png" />
			<link rel="apple-touch-icon" href="images/icons/icon-152x152.png" />
			<link rel="apple-touch-icon" href="images/icons/icon-192x192.png" />
			<link rel="apple-touch-icon" href="images/icons/icon-384x384.png" />
			<link rel="apple-touch-icon" href="images/icons/icon-512x512.png" />
			<meta name="apple-mobile-web-app-status-bar" content="#db4938" />
		-->
	</head>
	<body id="main" class="main hidden" onload="main()">
		<span itemprop="image" itemscope itemtype="image/png">
			<link itemprop="url" href="./media/vdoNinja_logo_full.png" />
		</span>
		<link itemprop="thumbnailUrl" href="./media/vdoNinja_logo_full.png" />
		<span itemprop="thumbnail" itemscope itemtype="http://schema.org/ImageObject">
			<link itemprop="url" href="./media/vdoNinja_logo_full.png" />
		</span>
		
		<script type="text/javascript" crossorigin="anonymous"  src="./thirdparty/CodecsHandler.js?ver=49"></script>
		<script type="text/javascript" crossorigin="anonymous" src="./thirdparty/aes.js"></script>
		<script type="text/javascript" crossorigin="anonymous" src="./webrtc.js?ver=696"></script>
		<input id="zoomSlider" type="range" style="display: none;" />
		<span id="electronDragZone" style="pointer-events: none; z-index:-10; position:absolute;top:0;left:0;width:100%;height:2%;-webkit-app-region: drag;min-height:20px;"></span>
		<div id="header">
			
			<a id="logoname" href="./" style="text-decoration: none; color: white; margin: 0 2px 0px 8px;">
				<span data-translate="logo-header">
					<span id="qos">V</span>DO.Ninja 
				</span>
			</a>
			<div id="head1" style="height: 100%; display: flex; align-items: center;">
				<input type="text" autocorrect="off" autocapitalize="none" id="joinroomID" name="joinroomID" tabindex="1" size="22" placeholder="Join by Room Name here" alt="Enter a room name to join" title="Enter a room name to quick join" onkeyup="jumptoroom(event)"/>
				<button onclick="jumptoroom();" id='jumptoroomButton' role="button" aria-pressed="false" tabindex="1" alt="Join room" title="Join room" >GO</button>
			</div>
			<div id="head1a" class="hidden">
				<input type="text" autocorrect="off" autocapitalize="none" id="joinbyURL" name="joinbyURL" size="22" placeholder="Load a website URL" alt="Enter the URL to load" title="Enter the URL to load"/>
				<button onclick="jumptoURL(event)"  role="button" aria-pressed="false" alt="Load URL" title="Load URL" >Load URL</button>
			</div>
			<div id="head5" class="hidden"></div>
			<div id="head3" style="display: inline-block;" class="hidden">
				<span style="color: #888;" id="copythisurl" tabindex="1" > &nbsp; 
					<span data-translate="copy-this-url">Copy this URL into an OBS "Browser Source"</span> <i style="color: #CCC;" class="las la-long-arrow-alt-right"></i> &nbsp; 
				</span>
			</div>
			<div id="head3a" style="display: inline-block;" class="hidden">
				<a
					id="reshare"
					data-drag="1"
					onclick="copyFunction(this, event)"
					class="task grabLinks"
					data-menu="context-menu"
					style="font-weight: bold; color: #afa !important; cursor: grab; background-color: #0000;  font-size: 115%; min-width: 335px; max-width: 800px;"
				></a>
				<i class="las la-paperclip" style="color: #DDD;" title="Copy link to clipboard" onclick="copyFunction(document.getElementById('reshare'), event);" onmouseover="this.style.cursor='pointer'"></i>
				<span title="Save and ask to reload the current page on next site visit" style='font-size:92%;' onclick="saveRoom(this);" onmouseover="this.style.cursor='pointer'">ðŸ’¾</span>
			</div>
			<div id="head4" style="display: inline-block;" class="hidden">
				<span style="font-size: 68%; color: white;">
					<span data-translate="you-are-in-the-control-center">Control center for room:</span>
					
					<div id="dirroomid" style="font-size: 0%; color: #99c; display: inline-block;"></div>
					<span id="saveRoom" onclick="saveRoom(this)" style='cursor:pointer;margin-left:10px;' title="Will remember the room, prompting you the next time you visit if you wish to load this director's room again">ðŸ’¾</span>
					<span id="togglePreviewMode" onclick="switchModes()" style='cursor:pointer;margin-left:2px;' title="Toggle between the director control-room view and a scene preview-mode.">ðŸªŸ</span>
				</span>
			</div>
			<div id="head2" class="hidden" style="display: inline-block; text-decoration: none; font-size: 60%; color: white;">
				<span data-translate="joining-room">You are in room</span>:
				<div id="roomid" style="display: inline-block;"></div>
			</div>
			<div id="head6" class="hidden" data-translate="only-director-can-hear-you">Only the director can hear you currently.</div>
			<div id="head7" class="hidden" data-translate="director-muted-you">The director has muted you.</div>
			<div id="head8" class="hidden" data-translate="director-video-muted-you">The director has disabled your camera temporarily.</div>
		</div>
		
		
		<script>
		
			if (window.location.hostname.indexOf("www.obs.ninja") == 0) {
				window.location = window.location.href.replace("www.obs.ninja","obs.ninja"); // the session.salt is domain specific; let's consolidate www as a result.
			} else if (window.location.hostname.indexOf("www.vdo.ninja") == 0) {
				window.location = window.location.href.replace("www.vdo.ninja","vdo.ninja"); // the session.salt is domain specific; let's consolidate www as a result.
			} else if (("isSecureContext" in window) && (window.isSecureContext===false)){
				console.error("This site must be run in a secure context; please ensure all links, iframes, and parent windows are using SSL");
			}

		
			var session = WebRTC.Media; // session is a required global variable if configuring manually. Run before loading main.js but after webrtc.js.
			session.version = "24.0b";
			session.streamID = session.generateStreamID(); // randomly generates a streamID for this session. You can set your own programmatically if needed
			
			session.defaultPassword = "someEncryptionKey123"; // Change this password if self-deploying for added security/privacy
			// session.salt = location.hostname; // used only if password is not == False. You can change to "session.salt = location.hostname+location.pathname;" for greater deployment isolation
			
			session.stunServers = [{ urls: ["stun:stun.l.google.com:19302", "stun:stun.cloudflare.com:3478"]}]; // google + cloudflare stun servers. default
			
			///////////////  ------  Custom basic TURN SETUP SECTION STARTS Here --------
			// session.configuration = {         // uncomment to disable the default usage of the vdo.ninja turn servers.
			//	iceServers: session.stunServers,
			//	sdpSemantics: 'unified-plan'
			// };
			// var turn = {}; // Just an example entry for a basic TURN server 
			// turn.username = "steve";
			// turn.credential = "justtesting";
			// turn.urls = ["turn:turn.obs.ninja:443"]; 
			// session.configuration.iceServers.push(turn);
			//
			// turn = {}; // second turn server example entry. 
			// turn.username = "steve";
			// turn.credential = "justtesting";
			// turn.urls = ["turn:turn2.obs.ninja:443"]; 
			// session.configuration.iceServers.push(turn);
			/////////////// ------------ END OF TURN SETUP SECTION -------

			/////////////// --------  Alternative custom TURN SETUP SECTION here ---------
			// Use this section if you plan to use the turn-credentials.php sample and its use-auth-secret and static-auth-secret method, rather than a plain password
			// 
			// try {
				// session.ws = false; // prevents connection
				// var phpcredentialsRequest = new XMLHttpRequest();
				// phpcredentialsRequest.onload = function() {
					// if (this.status === 200) {
						// try {
							// var res = JSON.parse(this.responseText);
						// } catch(e){
							// console.error(e); // not proper JSON
							// return;
						// }
						// session.configuration = {};
						// session.configuration.sdpSemantics = "unified-plan";
						// session.configuration.iceServers = [];
						//  // session.configuration.iceServers = session.stunServers; // Uncomment to use the hard-coded Google STUN servers, if we don't provide our own STUN

						// let phpIceServers = {"username": res[0], "credential": res[1], urls:[]};
						// for (let i = 2; i < res.length; i++){ // Supports one or multiple TURN/STUN servers, but assumes same credientials for each.
							// phpIceServers['urls'].push(res[i]);
						// };
						// session.configuration.iceServers.push(phpIceServers);

						// if (session.ws===false){
							// session.ws=null; // allows connection (clears block state)
							// session.connect(); // connect if not already connected.
						// }
					// }
					//  // system does not connect if php script does not respond.
				// };
				// phpcredentialsRequest.open('GET', './turn-credentials.php', true); // `false` makes the request synchronous
				// phpcredentialsRequest.send();
			// } catch (e) {
				// console.error(e);
				// errorlog("php-credentials script Failed");
			// }
			//////////////////// -------------- END OF ALTERNATIVE TURN SETUP SECTION -------

			// session.configuration.iceTransportPolicy = "relay";  // uncomment to enable "&privacy" and force the TURN server's use

			// session.wss = "wss://wss.vdo.ninja:443"; // US-East (Default)

			//  If wanting to fully-self-host, uncomment the following and deploy your own websocket server; good for air-gapped deployments
			// session.wss = "wss://wss.yourdomainhere.com:443"; // https://github.com/steveseguin/websocket_server 
			// session.customWSS = true;
			//////
			
			///// The following lets you set the defaults

			// session.webcamonly // true,false
			// session.stereo // 0,1,2,3,4,5
			// session.audiobitrate // int in kbps
			// session.view // "xxxx" ; the stream ID or a list of Stream IDs to Connect to. Not the same as &noaudio/&novideo. Set to "" (empty) if you don't wish to connect to any.
			// session.remote // See docs, but allows for remote stats monitoring and remote focus/zoom control
			// session.optimize  // Whether to optimize invisible scenes in OBS. See docs.vdo.ninja. Setting to 0 will pause the video/audio when not visible in OBS
			// session.disableOBS // If true, will disable any OBS-specific events/functions.
			// session.noaudio // False by default, otherwise specify a list [] of stream IDs to allow. Listing none allows no incoming audio streams
			// session.novideo // False by default, otherwise specify a list [] of stream IDs to allow. Listing none allows no incoming video streams
			// session.forceios // If true, will allow iOS devices to send H264 video to other guests in a room
			// session.nocursor // hides the cursor using CSS
			// session.codec // default codec; maybe h264 is useful? the default is up to the browser normally
			// session.scale // By default, scale is self-optimizing, but you can set a value of 1 to 100 to choose the playback scale of all incoming video streams
			// session.bitrate  // int in kbps -- you can set the default max target bitrate here
			// session.totalRoomBitrate = 500; // int, kbps -- you can set the default quality of the group room here
			// session.height // int  ; height to publish a video stream at.  Will fail if not supported by the camera
			// session.width // int ; see above
			// session.quality // int  -- if setting == 0, then than the default resolution will be 1080p, instead of 720p60 (q=1) , while  q=2 = 360p30.
			// session.sink // Output device to playback audio to. see the docs
			// session.offsetChannel // int
			// session.audioChannels // int
			// session.security // true to disable the wss connection after the first peer connection is made
			// session.frameRate // int ; publishing frame rate. will fail if camera does not support it.
			// session.sync // see the docs
			// session.buffer // int in milliseconds ; see the docs
			// session.roomid // "yyyy"  -- the room name to use.  alphanumeric.
			// session.scene // the scene name. Scene 0, 1, ... 8, or any custom scene name is supported.  STRING value. Needed to have a clean view link of a guest stream
			// session.title // "zzzz"   ; sets the title of the browser page.
			// session.introOnClean = true; // this will load the page with the webcam selection screen if &push or &room is in the URL; no need to use &webcam.
			// session.lowBitrateCutoff = 300; // Set a minimum bitrate (in kbps) before the stream is hidden. Useful for IRL streams maybe
			// session.apiserver = "wss://api.vdo.ninja:443"; // specifiy a custom websocket API URL.
			// session.darkmode = false; // enable or disable the dark style theme as the default
			// session.defaultBackgroundImages = ["./media/bg_sample1.webp", "./media/bg_sample2.webp"]; // for &effects=5 (virtual backgrounds)
			// session.hidehome = true; // If used, 'hide home' will make the landing page inaccessible, along with hiding a few go-home elements.
			// session.record = false; // uncomment to block users from being able to record via vdo.ninja's built in recording function
		</script>
		<script type="text/javascript" crossorigin="anonymous" id="lib-js" src="./lib.js?ver=917"></script>
		<!-- 
		// If you wish to change branding, blank offers a good clean start.
		<script type="text/javascript" id="main-js" src="./main.js" data-translation="blank"></script>
		-->
		<script type="text/javascript" crossorigin="anonymous" id="main-js" src="./main.js?ver=737"></script>
	</body>
</html>
